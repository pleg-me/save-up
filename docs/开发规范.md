# 开发规范

## 服务器管理最佳实践

### 启动开发服务器前的检查流程

在启动任何开发服务器之前，应该遵循以下步骤：

#### 1. 检查现有实例
```bash
# 使用工具检查当前运行的服务器状态
check_command_status <command_id>
```

#### 2. 复用运行中的服务
- 如果服务正常运行且端口正确，直接使用现有实例
- 避免重复启动相同的服务

#### 3. 优雅重启（如有必要）
- 如果需要重启服务，先停止现有实例：
  ```bash
  stop_command <command_id>
  ```
- 然后重新启动新实例

#### 4. 避免的问题
- ❌ 端口冲突
- ❌ 资源浪费
- ❌ 不必要的重启时间
- ❌ 多个相同服务实例同时运行

### 当前项目服务器配置

#### 前端开发服务器
- **工具**: Vite
- **端口**: 8080
- **配置文件**: `vite/config.dev.mjs`
- **启动命令**: `npm run dev`

#### 后端WebSocket服务器
- **工具**: .NET Core
- **端口**: 5000
- **启动命令**: `dotnet run`
- **工作目录**: `server/`

### 检查命令示例

```bash
# 检查Vite开发服务器状态
check_command_status 39b63b74-6aa4-4206-8bd2-50f0d826f25a

# 检查WebSocket服务器状态  
check_command_status f585b4da-f0fe-4e3f-b9c6-a57b89084566
```

### 注意事项

1. **终端管理**: 最多支持5个终端，合理复用现有终端
2. **命令ID追踪**: 记录每个长期运行服务的command_id以便管理
3. **端口规划**: 避免端口冲突，使用固定端口配置
4. **状态监控**: 定期检查服务器运行状态

---

*此规范旨在提高开发效率，减少资源浪费，确保开发环境的稳定性。*